!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("restaflib",[],e):"object"==typeof exports?exports.restaflib=e():t.restaflib=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){var r=n(13)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e){function n(t,e,n,r,a,s,o){try{var i=t[s](o),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var o=t.apply(e,r);function i(t){n(o,a,s,i,u,"next",t)}function u(t){n(o,a,s,i,u,"throw",t)}i(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(10),a=n.n(r);var s=function(){return"\n    print _args_;\n\n    results = casFetchRows(_args_.table.caslib, _args_.table.name , _args_.start + 1, _args_.limit,  _args_.format, _args_.where);  \n    send_response({casResults = results});  \n        \n    function casFetchRows(caslib, name, from, count, format, where) ;    \n     \n       rc = checkAndLoadTable(caslib, name);\n    \n       if (rc ne true) then do;\n        text = 'Unable to access ' ||caslib||'.'||name;   \n        rx = {severity=2,reason=6, status='error',statusCode=2, formatted=text};\n        exit(rx);  \n        end;  \n\n        /*\n         * get tableoinfo to get rowCount\n         */\n\n        action table.tableinfo r= result/    \n            caslib = caslib    \n            name   = name;    \n     \n        rowCount = result.TableInfo[1, 'rows'];\n        to = from + count - 1;\n\n        \n        /*\n         * get column information\n         */\n\n        action table.columninfo r=infoResult /\n            table = {caslib=caslib name=name};\n\n        columns ={{Column='_Index_',ID=0,Type='double',RawLength=5,FormattedLength=5,NFL=0,NFD=0}};\n        i = 2;\n        do c over inforesult.columninfo;\n           columns[i] = c;\n           i = i + 1;\n        end;\n        \n        /*\n         * Fetch the current set of rows\n         */\n\n        rows = {};\n        if (from <=  rowCount) then do;\n          action table.fetch r = result status=rcx/    \n              table = {caslib=caslib, name=name where=where}   \n              from= from to=to format=format  sastypes=true\n              ;\n          if (rcx.severity eq 2) then do;\n            exit(rcx);\n          end;\n          /* \n          * create payload to return\n          */\n\n          i = 1;\n          rows ={};\n          do row over result.fetch;\n            rr = {};\n            j = 1;\n            do key,v  over row;\n              rr[j] = override(columns[j].Type, v);\n              j = j + 1;\n            end;\n            rows[i] = rr;\n            i = i + 1;\n          end;\n        end;\n\n        currentCount = DIM(rows);\n        pagination = {};   \n        table = {caslib=caslib, name=name};\n\n        pagination = setPagination(from, count, format, where, currentCount, rowCount, table);\n    \n        lastRequest={start=from-1, limit=count, format=format, currentCount=currentCount, \n                     rowCount=rowCount, where=where, table=table, version='3'};\n       scrollOptions = getKeys(pagination);\n       return( \n         {pagination = pagination, data = {schema=columns, rows=rows , scrollOptions=scrollOptions}, lasRequest=lastRequest}\n         );\n    end;    \n    \n    \n    /*\n     * For non-primary column types set new content\n     */\n\n    function setPagination(from, count, format, where,  currentCount, rowCount, table);\n\n\n      prevStart = max(from - count - 1, 0);\n\n      if (currentCount lt count) then do; \n        pagination.prev = {start=prevStart, limit=count, format=format, where=' ', table=table};\n        if (prevStart ne 0) then do;\n          pagination.first = {start=0, limit=count, format=format, where=' ', table=table};\n        end; \n      return pagination;\n      end;\n      currentStart = from -1;\n      if (currentStart eq 0) then do;\n         pagination.next = {start=count, limit=count, format=format, where=' ', table=table};\n         return pagination;\n      end;\n\n      nextStart = currentStart + count;\n      pagination.next = {start=nextStart, limit=count, format=format, where=' ', table=table};\n      pagination.prev = {start=prevStart, limit=count, format=format, where=' ', table=table};\n      if (prevStart ne 0) then do;\n        pagination.first = {start=0, limit=count, format=format, where=' ', table=table};\n      end; \n      return pagination;\n  end;\n\n\n\n\n    function override(type, iv);\n      if (type EQ 'varbinary')       then v = '...varbinary';\n      else if (type EQ  'blob')      then v = '...blob';\n      else if (type EQ 'table')      then v = '...table';\n      else if (type EQ 'dictionary') then v = '...dictionary';\n      else if (type EQ 'list')       then v = '...list';\n      else if (type EQ 'isArray')    then v = '...array';\n      else v = iv;\n      return v;\n      end;\n\n      \n    "};var o=function(){return"\n    function checkAndLoadTable(caslib, name);   \n        \n                /* verify caslib is there */\n                 table.queryCaslib status=status result=result/\n                    caslib = caslib;\n                do k,v over result;   /* to handle casuser[user] */                       \n                   rc = v;\n                end;\n                if ( rc eq false ) then \n                   return -1;\n                /*    \n                * Check to see if table is already loaded   \n                */   \n                action table.tableExists r=result/    \n                    caslib = caslib    \n                    name  = name;    \n                /*   \n                * if not loaded then try to load it   \n                */   \n                rc = true;\n                if (result.exists eq 0 or result.exists eq 2) then do;   \n                    path = lookupPath(caslib, name);\n                    if (path eq '*') then do;\n                       rc = false;\n                    end;\n                    else do;\n                        action table.loadTable status=status/    \n                            caslib = caslib    \n                            source = path    \n                            casout={caslib= caslib name=name}; \n                        if (status.statusCode ne 0 ) then rc = false;\n                    end; \n                end;        \n                return rc;  \n            end;   \n        \n        function saveAndLoadTable(caslib, source, targetlib, targetname,promote);\n        \n                /* load source */\n                r = checkAndLoadTable(caslib, source);\n        \n                sashdat = target||\".sashdat\";\n                table.save /\n                    caslib= targetlib name=sashdat\n                    table = {caslib=caslib name=source} replace=true;\n                \n                table.droptable /\n                    caslib=targetlib name=target quiet=true;\n                \n                table.loadtable result=r status=rc/\n                    caslib=targetlib casout={caslib=targetlib name=target replace=TRUE}\n                    path=sashdat;\n        \n                if (promote eq true) then do;\n                    table.promote result=r status=rc/\n                      caslib=caslib name=target quiet=true\n                      targetLib=caslib target=target;\n                end;\n                if (rc.severity eq 2) then do;\n                    print rc;\n                    print 'Ignoring error';\n                    end;\n                r = 0;\n                return r;\n        \n         end;\n        \n    function lookupPath(caslib, name ) ; \n            table.fileInfo r = result/\n            caslib=caslib; \n        \n            names = result.fileInfo[,4]; \n            nameu = upcase(name)||'.SASHDAT'; \n            cpath = '*'; \n            count = 0; \n        \n            do n over names; \n                if (upcase(n) eq nameu)  then do; \n                    count = count + 1; \n                    if ( cpath eq '*') then do; \n                        cpath = n; \n                    end; \n                end; \n            end; \n            \n            if (count GT 1 ) then do; \n                print 'Warning: ' count 'Files with names only different in case exist - First one chosen';\n                print 'Path: ' cpath ' will be used****';  \n            end; \n            r = cpath; \n            return r; \n        end; \n            /*-----------------------------------------*/ \n            /* isModel: is it model table              */  \n            /*-----------------------------------------*/  \n         \n            function isModel(caslib, name) ; \n                 table.columnInfo r = result /  \n                        table = {caslib=caslib , name=name};  \n                 validTable = false; \n                 mtype = 'bad'; \n                 do c over result.columninfo;  \n                    cu = upCase(c.Column); \n                    if ( cu eq 'DATASTEPSRC') then do; \n                       mtype = 'ds'; \n                    end; \n                    else if ( cu eq '_STATE_' ) then do; \n                      mtype = 'astore'; \n                    end; \n                    else if (cu eq 'MODELMETADATA') then do; \n                      mtype = 'ds2'; \n                    end; \n                end;  \n                print 'Specified model type: ' || mtype; \n                return mtype; \n            end; \n         \n    /*-----------------------------------------*/ \n            /* Returns contents of the specified table */  \n            /*-----------------------------------------*/  \n         \n            function contents(caslib, name) ;    \n                table.columnInfo r = result /  \n                        table = {caslib=caslib , name=name};  \n               /* columns ={{Column='_Index_',ID=0,Type='double',RawLength=5,FormattedLength=5,NFL=0,NFD=0}}; */ \n                i = 1;  \n                columns = {}; \n                do c over result.columninfo;  \n                    columns[i] = c;  \n                    i = i + 1;  \n                end;  \n                return {describe = columns, table = {}};   \n            end;  \n    \n           /*------------------------------------------*/  \n            /* Returns unique values                   */  \n            /*-----------------------------------------*/  \n         \n            function selectionLists(idvars,caslib, name, where);   \n                 \n                s = checkAndLoadTable(caslib, name);   \n                if ( s ne true) then do;   \n                results = {Errors= 'Unable to access ' ||caslib||'.'||name, statusCode = s};   \n              \n                end;   \n                print idvars;\n                do k over idvars;   \n                r  = _getValues(k, caslib, name, where);   \n                results[k] = r;   \n                end;   \n                return { data=results, statusCode=0};   \n            end;   \n           function _getValues(id, caslib, name, where) ;   \n                             \n                action table.dropTable/   \n                caslib='casuser' name='dtemp1' quiet=TRUE;   \n                     \n                action table.deleteSource status=src /   \n                caslib='casuser' source= 'dtemp1.sashdat' quiet=TRUE;   \n                     \n                action simple.groupby result=r status=rc/   \n                    aggregator = 'N'   \n                    inputs     = {id}   \n                    table      = {caslib=caslib name=name, where=where}   \n                    casout     = {caslib='casuser' name='dtemp1'}   \n                ;   \n                action table.fetch result=r/   \n                    table={caslib='casuser' name='dtemp1'}    \n                    sortby={{name=id,  order='ascending'}};   \n                result = r.Fetch[,2];   \n                return result;   \n                end;  \n            /*------------------------------------------*/ \n            /* get a record                             */ \n            /*------------------------------------------*/ \n         \n            function _fetchData(filter, table); \n                s = checkAndLoadTable(table.caslib, table.name);   \n                if ( s ne 0 ) then do;   \n                    results = {Errors= 'Unable to access ' ||table.caslib||'.'||table.name};   \n                    return results;   \n                    end;   \n                wherex = dictTowhere(filter);   \n               /* wherex = table.caslib||'.'||table.name||'(where=('||wherex||'));';  \n                 \n                destroyTable('casuser', 'input');  \n         \n                action datastep.runCode r=result status=rc/   \n                    single='yes'   \n                    code = 'data casuser.input; set ' || wherex||'run;';  \n                    */ \n                     \n                action table.fetch r = result /   \n                    table={caslib=table.caslib name=table.name where=wherex};   \n             \n                rows = resultsToDict(result.Fetch);   \n                return {scenario = rows, table = result.Fetch};   \n         \n            end; \n    function destroyTable(caslib,name);   \n                action table.dropTable/   \n                caslib=caslib name=name quiet=TRUE;   \n                         \n                action table.deleteSource status=src /   \n                caslib=caslib source= name||'.sashdat' quiet=TRUE;   \n                     \n            return true;   \n            end;   \n                 \n                 \n            function dictToWhere(filter);   \n                where ='';   \n                andbit='  ';   \n                do k,v over filter;   \n                    if (isString(v) ) then do;   \n                        where = where || andbit || k ||  ' eq ' || '\"'||v||'\"';   \n                    end;    \n                    else do;   \n                        where = where || andbit || k ||  ' eq ' || v ;   \n                    end;   \n                andbit =' and ';   \n                end;   \n            return where;   \n            end;   \n                 \n            function resultsToDict(r);   \n                casResults = {};   \n                i = 1;   \n                do row over r;   \n                casResults[i] = row;   \n                i = i + 1;   \n                end;   \n                return casResults;   \n            end;   \n             \n            function argsToTable(_arg_, caslib, name );   \n                action table.droptable/  \n                    caslib=caslib name=name quiet=TRUE;  \n                i = 1;  \n                do key,obj over _arg_;  \n                    columns[i] = key;  \n                    row[i] = obj;  \n                    if ( isString(obj) ) then  \n                        type[i] = 'varchar';   \n                    else if ( isInteger(obj) ) then   \n                        type[i] = 'int';   \n                    else type[i] = 'double';  \n                    i = i + 1;  \n                    end;    \n                 \n                data1 = newTable('data1', columns, type, row );   \n                 \n                saveresult data1 casout=name caslib=caslib replace;   \n            end; \n    \n        function saveAndPromoteTable(caslib, target, source);\n            sashdat = target||\".sashdat\";\n            rc = checkAndLoadTable(caslib, source);\n            table.droptable /\n                caslib=caslib name=target quiet=true;\n        \n            table.save /\n                caslib= caslib name=sashdat\n                table = {caslib=caslib name=source} replace=true;\n            \n            table.loadtable result=r/\n                caslib=caslib casout={caslib=caslib name=target replace=TRUE}\n                path=sashdat;\n        \n            table.promote result=r status=rc/\n                caslib=caslib name=target quiet=true\n                targetLib=caslib target=target;\n            print rc;\n            r = rc.severity;\n            if (rc.severity gt 0) then do;\n              print rc;\n              print 'Ignoring error';\n              rc = 0;\n            end;\n        \n            return r;\n         end;  \n       \n     "};var i=function(){return"\n  results = casFetchRows(_args_.table.caslib, _args_.table.name , _args_.from, _args_.count,  _args_.format, _args_.where);   \n  send_response({casResults = results});  \n      \n  function casFetchRows(caslib, name, from, count, format, where) ;    \n   \n     rc = checkAndLoadTable(caslib, name);\n  \n     if (rc ne true) then do;\n      text = 'Unable to access ' ||caslib||'.'||name;   \n      rx = {severity=2,reason=6, status='error',statusCode=2, formatted=text};\n      exit(rx);  \n      end;  \n\n      /*\n       * get all table to get rowCount\n       */\n\n      action table.tableinfo r= result/    \n          caslib = caslib    \n          name   = name;    \n   \n      rowCount = result.TableInfo[1, 'rows'];    \n     \n      to       = from + count - 1;   \n      \n      /*\n       * get column information\n       */\n\n      action table.columninfo r=infoResult /\n          table = {caslib=caslib name=name};\n\n      columns ={{Column='_Index_',ID=0,Type='double',RawLength=5,FormattedLength=5,NFL=0,NFD=0}};\n      i = 2;\n      do c over inforesult.columninfo;\n         columns[i] = c;\n         i = i + 1;\n      end;\n      \n      /*\n       * Fetch the current set of rows\n       */\n     /* wherex = dictTowhere(where); let user send in the where clause */\n      print where;\n\n      action table.fetch r = result /    \n          table = {caslib=caslib, name=name where=where}   \n          from= from to=to format=format  sastypes=true\n          ;\n\n      /* \n       * create payload to return\n       */\n\n      i = 1;\n      rows ={};\n      do row over result.fetch;\n        rr = {};\n        j = 1;\n        do key,v  over row;\n          rr[j] = override(columns[j].Type, v);\n          j = j + 1;\n        end;\n        rows[i] = rr;\n        i = i + 1;\n      end;\n\n      pagePrev = max(from - count, 1);\n     \n      if ( to eq rowCount ) then do;    \n          pageNext = -1;    \n      end;    \n      else do ;    \n          pageNext = min(to + 1, rowCount);    \n      end;   \n      table = {caslib=caslib, name=name};\n      pagination = {next= {from=pageNext, count=count, format=format, where=where table=table}, prev={from=pagePrev, count=count, format=format, where=where, table=table}};\n      pagination.current = {from = from, to=to, rowCount=rowCount, version=1};\n      return( \n       {pagination = pagination, data = {schema=columns, rows=rows }}\n       );\n  end;    \n  \n  \n  /*\n   * For non-primary column types set new content\n   */\n\n  function override(type, iv);\n    if (type EQ 'varbinary')       then v = '...varbinary';\n    else if (type EQ  'blob')      then v = '...blob';\n    else if (type EQ 'table')      then v = '...table';\n    else if (type EQ 'dictionary') then v = '...dictionary';\n    else if (type EQ 'list')       then v = '...list';\n    else if (type EQ 'isArray')    then v = '...array';\n    else v = iv;\n    return v;\n    end;\n\n    \n  "};var u=function(){return"\n    rc = checkAndLoadTable(_args_.masterTable.caslib, _args_.masterTable.name);\n\n    if (rc ne true) then do;\n        text = 'Unable to access ' ||_args_.masterTable.caslib||'.'||_args_.masterTable.name;   \n        rx = {severity=2,reason=6, status='error',statusCode=2, formatted=text};\n        exit(rx); \n    end; \n    \n    rc = checkAndLoadTable(_args_.setTable.caslib, _args_.setTable.name);\n    if (rc ne true) then do;\n        text = 'Unable to access ' ||_args_.setTable.caslib||'.'||_args_.setTable.name; \n        rx = {severity=2,reason=6, status='error',statusCode=2, formatted=text};\n        return rx;\n    end;\n\n\n    setdata = _args_.setTable.caslib ||'.'||_args_.setTable.name;\n    masterdata = _args_.masterTable.caslib ||'.'||_args_.masterTable.name;\n\n    action datastep.runCode r=result status=rc/\n     code='data ' ||masterdata||'(append=YES);set ' || setdata ||'; run;';\n\n    if (rc.statusCode ne 0) then do;\n      exit(rc);\n    end; \n    else do;\n     results = {msg= 'Append succeeded', statusCode=true};\n     end;\n    \n    send_response({casResults = results});\n    "};e.a={commonCasl:o,casFetchData:s,casFetchRows:i,scoreCasl:a.a,casAppendTable:u,casRowSets:s}},function(t,e,n){"use strict";var r=n(1),a=n.n(r),s=n(0),o=n.n(s),i=n(7);function u(){return(u=a()(o.a.mark((function t(e,n,r,a){var s,u,c,l,f,p,h,d=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(s=Object(i.a)(null!==a?a:{},"_args_"),u=(u=s+" "+r).replace(/\r?\n|\r/g,""),c={action:"sccasl.runcasl",data:{code:u}},l=d.length,f=new Array(l>4?l-4:0),p=4;p<l;p++)f[p-4]=d[p];return t.next=7,e.runAction.apply(e,[n,c].concat(f));case 7:return h=t.sent,t.abrupt("return",h);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a=function(t,e,n,r){return u.apply(this,arguments)}},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(1),a=n.n(r),s=n(0),o=n.n(s),i=n(3),u=n(2);function c(){return(c=a()(o.a.mark((function t(e,n,r,a,s){var c,l,f,p,h,d=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c=r,!1!==s&&(c=r+" "+u.a.commonCasl()),l=d.length,f=new Array(l>5?l-5:0),p=5;p<l;p++)f[p-5]=d[p];return t.next=5,i.a.apply(void 0,[e,n,c,a].concat(f));case 5:return h=t.sent,t.abrupt("return",h.items().toJS());case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a=function(t,e,n,r,a){return c.apply(this,arguments)}},function(t,e,n){var r=n(14);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(4),a=n.n(r);function s(t){var e="{ ",n=" ";for(var r in t){if(!0===Array.isArray(t[r])){var i=o(t[r]);e=e+n+"".concat(r,"=")+i}else{var u=a()(t[r]);if("object"===u){var c=s(t[r]);e=e+n+"".concat(r,"=")+c}else e=e+n+"".concat(r,"=")+("string"===u?' "'.concat(t[r],'" '):"".concat(t[r],"  "))}n=","}return e+="} "}function o(t){for(var e="{",n=" ",r=t.length,i=0;i<r;i++)if(!0===Array.isArray(t[i])){var u=o(t[i]);e=e+n+"".concat(i,"=")+u}else{var c=a()(t[i]);if("object"===c)e=e+n+s(t[i]);else e=e+n+("string"===c?' "'.concat(t[i],'" '):"".concat(t[i],"  "));n=","}return e+="}"}e.a=function(t,e){var n;return n=null===t?"{}":!0===Array.isArray(t)?o(t):s(t),"".concat(e," = ").concat(n,";")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return b}));var r=n(1),a=n.n(r),s=n(0),o=n.n(s);function i(){return(i=a()(o.a.mark((function t(e,n,r,a){var s,i,u,c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=a.output,i=s.caslib,null!=(u=s.name)){t.next=3;break}throw"Please specify table as caslib.name";case 3:return u=u.toLowerCase(u),c="\n      action table.droptable /\n       caslib= '".concat(i,"'  name= '").concat(u,"' quiet=true;\n\n      action table.deleteSource/\n      caslib= '").concat(i,"'  source= '").concat(u,".sashdat' quiet=true;   \n      "),l={action:"sccasl.runcasl",data:{code:c}},t.next=8,e.runAction(n,l);case 8:return l={action:"astore.upload",data:{rstore:{name:"".concat(u),caslib:"".concat(i),replace:!0},store:r}},t.next=11,e.runAction(n,l);case 11:return t.sent,t.abrupt("return","Upload of ".concat(a.source," to ").concat(i,".").concat(u," completed"));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var u=function(t,e,n,r){return i.apply(this,arguments)},c=n(5);function l(){return(l=a()(o.a.mark((function t(e,n,r,a,s){var i,u,l,p,h,d,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a.output,u=i.caslib,null!=(l=i.name)){t.next=3;break}throw"Please specify table as caslib.name";case 3:return t.next=5,f(e,n,u,l);case 5:return p={casout:{caslib:u,name:l},importOptions:{fileType:a.fileType}},"sas"!==a.fileExt&&"ds2"!==a.fileExt||(p.importOptions.delimiter="\\"),h={headers:{"JSON-Parameters":p,"Content-Type":"binary/octet-stream"},data:r,action:"table.upload"},t.next=10,e.runAction(n,h);case 10:if(t.sent,!0!==s){t.next=16;break}return d="\n\t\t\taction table.save r = result / \n\t\t\ttable = {caslib='".concat(u,"' name='").concat(l,"'} replace=true\n\t\t\tcaslib='").concat(u,"' name='").concat(l,"';\n\n\t\t\tsend_response(result);\n\t\t\t"),t.next=15,Object(c.a)(e,n,d,null,!0);case 15:t.sent;case 16:return b=null==a.source?"inline source":a.source,t.abrupt("return","Upload of ".concat(b," to ").concat((a.output,u),".").concat(a.output.name," completed"));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e,n,r){return p.apply(this,arguments)}function p(){return(p=a()(o.a.mark((function t(e,n,r,a){var s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(r,".").concat(a),i="\n\t\taction table.dropTable/   \n        caslib='".concat(r,"' name='").concat(a,"' quiet=TRUE;   \n             \n        action table.deleteSource status=src /   \n        caslib='casuser' source= '").concat(s,"' quiet=TRUE;  \n\t\tsend_response({csResults = {results= 'data deleted'}})\n\t\t"),t.next=4,Object(c.a)(e,n,i);case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var h=function(t,e,n,r,a){return l.apply(this,arguments)};function d(){return(d=a()(o.a.mark((function t(e,n,r,a){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={action:"table.save",data:{name:"".concat(a),caslib:"".concat(r),replace:!0,table:{name:"".concat(a),caslib:"".concat(r)}}},t.next=3,e.runAction(n,s);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b=function(t,e,n,r){return d.apply(this,arguments)}},function(t,e,n){var r=n(16),a=n(17),s=n(18),o=n(20);t.exports=function(t,e){return r(t)||a(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){return"\n        result = runMain(_args_); \n        send_response(result); \n        /* print result; */\n     \n     \n        function runMain(_args_) ; \n            r = {Error= 'No path'};   \n            if ( _args_.path eq '/selectors') then do;   \n                r = selectionLists(_args_.selectors, _args_.table.caslib, _args_.table.name);   \n            end;   \n            else if ( _args_.path eq '/contents') then do;  \n                r = contents(_args_.table.caslib, _args_.table.name);  \n            end;  \n            else if (_args_.path eq '/describe') then do; \n               r = describeModel(_args_); \n            end; \n            else if (_args_.path eq '/scenario' ) then do;\n              r = fetchData(_args_.filter, _args_.table);\n            end;\n            else if (_args_.path eq '/score') then do;  \n                if( exists(_args_, 'modelName')  eq false ) then\n                  modelname = '';\n                else modelName =_args_.modelName;\n                r =  runScoreCode(_args_.model,  _args_.scenario, modelName);   \n            end;   \n            else do; \n              r = {icasResults={Errors = 'Invalid action option specified' || _args_.path}, statusCode=404}; \n            end; \n            print r;\n            if ( r.statusCode ne 0) then do;\n              print r.icasResults;\n              exit({severity=2,reason=6, status=r.iCasResults.Errors,statusCode=r.statusCode});\n            end;\n            result = {casResults = r.icasResults};  \n            print '***************************************************************';  \n            print result;  \n            print '***************************************************************';  \n            return result;  \n        end; \n     \n        /*-----------------------------------------*/ \n        /* describeModel                           */ \n        /*-----------------------------------------*/ \n     \n        function describeModel(_args_) ; \n            s = checkAndLoadTable(_args_.model.caslib, _args_.model.name);   \n            if ( s ne true) then do;   \n                results = {Errors= 'Unable to access ' ||_args_.model.caslib||'.'||_args_.model.name};   \n                return {icasResults=results, statusCode=404};  \n                end; \n     \n            mtype = isModel(_args_.model.caslib, _args_.model.name); \n            if ( mtype EQ 'astore' ) then do; \n               r = astoreDescribe(_args_.model); \n            end; \n            else if (mtype EQ 'ds' or mtype EQ 'ds2') then do;\n               s = checkAndLoadTable(_args_.table.caslib, _args_.table.name);   \n              if ( s ne true ) then do;   \n                results = {Errors= 'Unable to access ' ||_args_.table.caslib||'.'||_args_.table.name};   \n                return {icasResults=results, statusCode=404};  \n                end; \n               r = contents( _args_.table.caslib, _args_.table.name); \n            end; \n         return {icasResults= r, statusCode=0} ;\n        end;             \n       \n        /*------------------------------------------*/ \n        /* astoreDescribe                           */ \n        /*------------------------------------------*/ \n     \n        function astoreDescribe(model); \n          action astore.describe r=result/ \n              rstore = { caslib= model.caslib name = model.name }; \n          rows = resultsToDict(result.InputVariables); \n          return {describe = rows, table = result.InputVariables}; \n        end; \n     \n        /*------------------------------------------*/  \n        /* score                                    */  \n        /*------------------------------------------*/  \n        function runScoreCode( model, scenario, modelName);   \n            print model; \n            s = checkAndLoadTable(model.caslib, model.name);   \n            if ( s ne true ) then do;   \n                results = {Errors= 'Unable to access ' ||model.caslib||'.'||model.name};   \n                return {icasResults=results, statusCode=404};   \n                end;\n             \n            mtype = isModel(model.caslib, model.name); \n     \n            if ( mtype eq 'bad' ) then do; \n               results = {Error= model.caslib||'.'||model.name || ' is not recognized as a valid supported model. Please check your values'};\n               return {icasResults=results, statusCode=400};\n              end; \n            destroyTable('casuser', 'input');   \n            argsToTable(scenario, 'casuser', 'input'); \n     \n            destroyTable('casuser', 'output');   \n     \n            if (mtype eq 'astore') then do; \n                print 'Scoring with astore'; \n                action astore.score r = result/   \n                    rstore = {caslib=model.caslib name=model.name}   \n                    out    = {caslib='casuser' name='output'}   \n                    table  = {caslib='casuser' name='input'};   \n            end; \n            else if (mtype eq 'ds') then do; \n                print 'scoring with datastep code'; \n                action datastep.runcodetable r = result/   \n                    single='YES'   \n                    codeTable= {caslib=model.caslib name=model.name}   \n                    casout = {caslib='casuser' name='output'}   \n                    table = {caslib='casuser' name='input'};   \n            end;  \n            else if (mtype eq 'ds2' ) then do; \n               print 'Scoring with d2'; \n               if ( missing(modelName) eq true) then do;\n                  results = {Error= 'modelName is missing. Please check your values'};\n                  return {icasResults=results, statusCode=400};\n               end;\n\n               action ds2.runModel r = result/ \n                  modelTable = {caslib=model.caslib, name=model.name} \n                  modelName = modelName \n                  table = {caslib= 'casuser', name='input'} \n                  casOut = {caslib= 'casuser' name='output'}; \n               end; \n     \n             \n            action table.fetch r = result /   \n                table={caslib='casuser' name='output'};   \n             \n            rows = resultsToDict(result.Fetch);   \n            \n            return {icasResults= rows, statusCode=0} ;\n        end;   \n             \n        \n    "}},function(t,e,n){"use strict";(function(t){var r=n(9),a=n.n(r),s=n(8);e.a=function(e,n){var r,o,i=null,u=s.c,c=function(t){return t};switch(o=null==e?"csv":e.split(".").pop().toLowerCase()){case"sas7bdat":r="basesas";break;case"sashdat":r="hdat";break;case"csv":r=o,i="UTF8";break;case"xslx":case"xsl":r=o;break;case"astore":case"sasast":r=o,u=s.b,c=function(e){return new t.from(e).toString("base64")};break;case"ds2":case"sas":r="csv",i="UTF8",u=s.c,c=function(t,e){var n=t.replace(/[^\x00-\x7F]/g,"").replace(/\r?\n/g,""),r=e.fileExt;return"modelName\\"+("sas"===r?"dataStepSrc":"ds2"===r?"ds2Src":"casl"===r?"caslSrc":"dataStepsrc")+"\n"+e.output.name+"\\ "+n+"\n"};break;default:throw"Currently file type of ".concat(o," is not supported")}var l=n.split("."),f=a()(l,2);return{source:e,output:{caslib:f[0],name:f[1].toLowerCase()},fileType:r,fileExt:o,fileOptions:i,transform:c,contentType:"binary/octet-stream",handler:u}}}).call(this,n(22).Buffer)},function(t,e,n){t.exports=n(27)},function(t,e,n){var r=n(4).default;function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=a=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},s=Object.prototype,o=s.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var a=e&&e.prototype instanceof v?e:v,s=Object.create(a.prototype),o=new P(r||[]);return i(s,"_invoke",{value:R(t,n,o)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var b="suspendedStart",m="executing",y="completed",g={};function v(){}function w(){}function x(){}var _={};p(_,c,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==s&&o.call(S,c)&&(_=S);var E=x.prototype=v.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(a,s,i,u){var c=d(t[a],t,s);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,u)}),(function(t){n("throw",t,i,u)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,u)}))}u(c.arg)}var a;i(this,"_invoke",{value:function(t,r){function s(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(s,s):s()}})}function R(t,n,r){var a=b;return function(s,o){if(a===m)throw new Error("Generator is already running");if(a===y){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var i=r.delegate;if(i){var u=A(i,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===b)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var c=d(t,n,r);if("normal"===c.type){if(a=r.done?y:"suspendedYield",c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=y,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=d(a,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function n(){for(;++a<t.length;)if(o.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,f,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},C(T.prototype),p(T.prototype,l,(function(){return this})),n.AsyncIterator=T,n.async=function(t,e,r,a,s){void 0===s&&(s=Promise);var o=new T(h(t,e,r,a),s);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(E),p(E,f,"Generator"),p(E,c,(function(){return this})),p(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},n}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(4).default,a=n(15);t.exports=function(t){var e=a(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(4).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,s,o,i=[],u=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){c=!0,a=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(19);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){},function(t,e,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var r=n(23),a=n(24),s=n(25);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),a=(t=i(t,r)).write(e,n);a!==r&&(t=t.slice(0,a));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=i(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?i(t,0):p(t,e);if("Buffer"===e.type&&s(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=i(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|h(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(r)return N(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,a){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,a);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,a){var s,o=1,i=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,i/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(a){var l=-1;for(s=n;s<i;s++)if(c(t,s)===c(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(n+u>i&&(n=i-u),s=n;s>=0;s--){for(var f=!0,p=0;p<u;p++)if(c(t,s+p)!==c(e,p)){f=!1;break}if(f)return s}return-1}function v(t,e,n,r){n=Number(n)||0;var a=t.length-n;r?(r=Number(r))>a&&(r=a):r=a;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var i=parseInt(e.substr(2*o,2),16);if(isNaN(i))return o;t[n+o]=i}return o}function w(t,e,n,r){return Y(N(e,t.length-n),t,n,r)}function x(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return x(t,e,n,r)}function k(t,e,n,r){return Y(F(e),t,n,r)}function S(t,e,n,r){return Y(function(t,e){for(var n,r,a,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,a=n%256,s.push(a),s.push(r);return s}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],a=e;a<n;){var s,o,i,u,c=t[a],l=null,f=c>239?4:c>223?3:c>191?2:1;if(a+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(s=t[a+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=t[a+1],o=t[a+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=t[a+1],o=t[a+2],i=t[a+3],128==(192&s)&&128==(192&o)&&128==(192&i)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&i)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==Object({}).TYPED_ARRAY_SUPPORT?Object({}).TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,a=0,s=Math.min(n,r);a<s;++a)if(t[a]!==e[a]){n=t[a],r=e[a];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),a=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):b.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,a){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),e<0||n>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&e>=n)return 0;if(r>=a)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),i=Math.min(s,o),c=this.slice(r,a),l=t.slice(e,n),f=0;f<i;++f)if(c[f]!==l[f]){s=c[f],o=l[f];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-e;if((void 0===n||n>a)&&(n=a),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(127&t[a]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(t[a]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var a="",s=e;s<n;++s)a+=B(t[s]);return a}function O(t,e,n){for(var r=t.slice(e,n),a="",s=0;s<r.length;s+=2)a+=String.fromCharCode(r[s]+256*r[s+1]);return a}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,a,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var a=0,s=Math.min(t.length-n,2);a<s;++a)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var a=0,s=Math.min(t.length-n,4);a<s;++a)t[n+a]=e>>>8*(r?a:3-a)&255}function I(t,e,n,r,a,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,s){return s||I(t,0,n,4),a.write(t,e,n,r,23,4),n+4}function q(t,e,n,r,s){return s||I(t,0,n,8),a.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var a=e-t;n=new u(a,void 0);for(var s=0;s<a;++s)n[s]=this[s+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],a=1,s=0;++s<e&&(a*=256);)r+=this[t+s]*a;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],a=1;e>0&&(a*=256);)r+=this[t+--e]*a;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],a=1,s=0;++s<e&&(a*=256);)r+=this[t+s]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,a=1,s=this[t+--r];r>0&&(a*=256);)s+=this[t+--r]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),a.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),a.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),a.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),a.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||P(this,t,e,n,Math.pow(2,8*n)-1,0);var a=1,s=0;for(this[e]=255&t;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||P(this,t,e,n,Math.pow(2,8*n)-1,0);var a=n-1,s=1;for(this[e+a]=255&t;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);P(this,t,e,n,a-1,-a)}var s=0,o=1,i=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===i&&0!==this[e+s-1]&&(i=1),this[e+s]=(t/o>>0)-i&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);P(this,t,e,n,a-1,-a)}var s=n-1,o=1,i=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===i&&0!==this[e+s+1]&&(i=1),this[e+s]=(t/o>>0)-i&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return q(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return q(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var a,s=r-n;if(this===t&&n<e&&e<r)for(a=s-1;a>=0;--a)t[a+e]=this[a+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=u.isBuffer(t)?t:N(new u(t,r).toString()),i=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%i]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n;e=e||1/0;for(var r=t.length,a=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(e-=3)>-1&&s.push(239,191,189);if(a=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){for(var a=0;a<r&&!(a+n>=e.length||a>=t.length);++a)e[a+n]=t[a];return a}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),o=r[0],i=r[1],u=new s(function(t,e,n){return 3*(e+n)/4-n}(0,o,i)),l=0,f=i>0?o-4:o;for(n=0;n<f;n+=4)e=a[t.charCodeAt(n)]<<18|a[t.charCodeAt(n+1)]<<12|a[t.charCodeAt(n+2)]<<6|a[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===i&&(e=a[t.charCodeAt(n)]<<2|a[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===i&&(e=a[t.charCodeAt(n)]<<10|a[t.charCodeAt(n+1)]<<4|a[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,a=n%3,s=[],o=0,i=n-a;o<i;o+=16383)s.push(l(t,o,o+16383>i?i:o+16383));1===a?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===a&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,u=o.length;i<u;++i)r[i]=o[i],a[o.charCodeAt(i)]=i;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var a,s,o=[],i=e;i<n;i+=3)a=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(r[(s=a)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,a){var s,o,i=8*a-r-1,u=(1<<i)-1,c=u>>1,l=-7,f=n?a-1:0,p=n?-1:1,h=t[e+f];for(f+=p,s=h&(1<<-l)-1,h>>=-l,l+=i;l>0;s=256*s+t[e+f],f+=p,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+f],f+=p,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=c}return(h?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,n,r,a,s){var o,i,u,c=8*s-a-1,l=(1<<c)-1,f=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,d=r?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(i=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(i=0,o=l):o+f>=1?(i=(e*u-1)*Math.pow(2,a),o+=f):(i=e*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;t[n+h]=255&i,h+=d,i/=256,a-=8);for(o=o<<a|i,c+=a;c>0;t[n+h]=255&o,h+=d,o/=256,c-=8);t[n+h-d]|=128*b}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},function(t,e,n){"use strict";n.r(e),n.d(e,"caslRun",(function(){return r.a})),n.d(e,"caslRunBase",(function(){return a.a})),n.d(e,"casSetup",(function(){return k})),n.d(e,"casActionRun",(function(){return E})),n.d(e,"casTableToJson",(function(){return M})),n.d(e,"casFetchData",(function(){return T})),n.d(e,"casFetchRows",(function(){return A})),n.d(e,"casAppendTable",(function(){return q})),n.d(e,"casUpdateData",(function(){return L})),n.d(e,"casUpload",(function(){return Q})),n.d(e,"casSaveTable",(function(){return I})),n.d(e,"casLoadTable",(function(){return H})),n.d(e,"computeRun",(function(){return rt})),n.d(e,"computeSetup",(function(){return st})),n.d(e,"computeSummary",(function(){return Z})),n.d(e,"computeSetupTables",(function(){return ct})),n.d(e,"computeFetchData",(function(){return dt})),n.d(e,"computeFileContent",(function(){return mt})),n.d(e,"computeResults",(function(){return it})),n.d(e,"computeAppendTable",(function(){return gt})),n.d(e,"computeUpdateData",(function(){return xt})),n.d(e,"computeUpload",(function(){return kt})),n.d(e,"findReport",(function(){return Et})),n.d(e,"getReportImage",(function(){return Tt})),n.d(e,"getReportUri",(function(){return At})),n.d(e,"getSasTableRows",(function(){return jt})),n.d(e,"jesSetup",(function(){return Lt})),n.d(e,"jesRun",(function(){return Ft})),n.d(e,"jesSummary",(function(){return It})),n.d(e,"jsonToDict",(function(){return Yt.a})),n.d(e,"caslScore",(function(){return b})),n.d(e,"caslDescribe",(function(){return v})),n.d(e,"masSetup",(function(){return Vt})),n.d(e,"masAddModel",(function(){return zt})),n.d(e,"masDescribe",(function(){return Wt})),n.d(e,"masRun",(function(){return Kt})),n.d(e,"masScore",(function(){return Zt})),n.d(e,"uploadData",(function(){return ne})),n.d(e,"lib",(function(){return re}));var r=n(5),a=n(3),s=n(6),o=n.n(s),i=n(1),u=n.n(i),c=n(0),l=n.n(c),f=n(2);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(){return(d=u()(l.a.mark((function t(e,n,r){var s,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=f.a.commonCasl()+" "+f.a.scoreCasl(),o=h({path:"/score"},r),t.next=4,Object(a.a)(e,n,s,o);case 4:return i=t.sent,u=i.items("results","casResults").toJS()[0],t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b=function(t,e,n){return d.apply(this,arguments)};function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(){return(g=u()(l.a.mark((function t(e,n,r){var s,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=f.a.commonCasl()+" "+f.a.scoreCasl(),o=y({path:"/describe"},r),t.next=4,Object(a.a)(e,n,s,o);case 4:return i=t.sent,u=i.items("results").toJS(),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var v=function(t,e,n){return g.apply(this,arguments)},w=n(4),x=n.n(w);function _(){return(_=u()(l.a.mark((function t(e,n,r,a){var s,o,i,u,c,f,p,h,d,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n){t.next=5;break}return t.next=4,e.logon(n);case 4:t.sent;case 5:return t.next=7,e.addServices("casManagement");case 7:return s=t.sent,o=s.casManagement,t.next=11,e.apiCall(o.links("servers"));case 11:if(0!==(i=t.sent).itemsList().size){t.next=14;break}throw{Error:"No cas servers were found"};case 14:if(u=null,null!=a){t.next=19;break}u=i.itemsList(0),t.next=26;break;case 19:if(c=i.itemsList().toJS(),-1!==(f=c.findIndex((function(t){return t===a})))){t.next=25;break}throw{Error:"server with name of ".concat(a," was not found")};case 25:u=i.itemsList(f);case 26:if(p=null,null!=r){t.next=33;break}return t.next=30,e.apiCall(i.itemsCmd(u,"createSession"));case 30:p=t.sent,t.next=47;break;case 33:if("object"!==x()(r)){t.next=37;break}p=r,t.next=47;break;case 37:return h={qs:{filter:"eq( id,'".concat(r,"')")}},t.next=40,e.apiCall(i.itemsCmd(u,"sessions"),h);case 40:if(0!==(d=t.sent).items().size){t.next=43;break}throw"ERROR: The sessionID ".concat(r," was not found.");case 43:return b=d.itemsCmd(d.itemsList(0),"self"),t.next=46,e.apiCall(b);case 46:p=t.sent;case 47:return t.abrupt("return",{servers:i,session:p});case 48:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=function(t,e,n,r){return _.apply(this,arguments)};function S(){return(S=u()(l.a.mark((function t(e){var n,r,a,s,o=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=o.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=o[a];return t.next=3,e.runAction.apply(e,r);case 3:return s=t.sent,t.abrupt("return",s.items().toJS());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E=function(t){return S.apply(this,arguments)};function C(){return(C=u()(l.a.mark((function t(e,n,r){var s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=f.a.commonCasl()+" "+f.a.casFetchData(),t.next=3,Object(a.a)(e,n,s,r);case 3:return o=t.sent,t.abrupt("return",o.items("results","casResults").toJS());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var T=function(t,e,n){return C.apply(this,arguments)};function R(){return(R=u()(l.a.mark((function t(e,n,r){var s,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==r.where&&(r.where=" "),s=f.a.commonCasl()+" "+f.a.casFetchRows(),t.next=4,Object(a.a)(e,n,s,r);case 4:return o=t.sent,null==(i=o.items("results","casResults").toJS()).data&&(i.data={rows:[]}),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=function(t,e,n){return R.apply(this,arguments)};function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(){return(P=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u,c,f,p,h,d,b,m,y,g,v,w,x;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in a=r.data,s=r.where,o=r.table,i="",u=" ",s)f=s[c],p="string"==typeof f?"'".concat(f.toString(),"'"):f,i=i+u+c+"= ".concat(p," "),u=" AND ";for(d in h=[],a)b=a[d],m=void 0,m=null==b?".":"string"==typeof b?JSON.stringify(b):b.toString(),h.push({var:d,value:m});return y=j(j({},o),{},{where:"".concat(i)}),g={action:"table.update",data:{table:y,set:h}},t.next=11,e.runAction(n,g);case 11:return v=t.sent,w={msg:"Update completed",statusCode:0},0!==(x=v.items().toJS().disposition).statusCode&&(w.statusCode=x.statusCode,w.msg=x.reason),t.abrupt("return",w);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var L=function(t,e,n){return P.apply(this,arguments)};function U(){return(U=u()(l.a.mark((function t(e,n,r,a,s){var o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.caslib,i=r.name,u={action:"table.save",data:{name:"".concat(i),caslib:"".concat(o),replace:!1!==a,table:r}},t.next=4,e.runAction(n,u);case 4:return t.abrupt("return",{msg:"".concat(o,".").concat(i," saved}"),statusCode:0});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=function(t,e,n,r,a){return U.apply(this,arguments)};function D(){return(D=u()(l.a.mark((function t(e,n,r,s,o){var i,u,c,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=f.a.commonCasl()+" "+f.a.casAppendTable(),u={masterTable:s,setTable:r,save:null==o||o},t.next=4,Object(a.a)(e,n,i,u);case 4:if(c=t.sent,p=c.items("results","casResults").toJS(),!0!==o){t.next=9;break}return t.next=9,I(e,n,s);case 9:return t.abrupt("return",p);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q=function(t,e,n,r,a){return D.apply(this,arguments)};var M=function(t,e){var n=t.items("tables",e),r=n.get("rows"),a=[];n.get("schema").map((function(t){a.push(t.get("name"))}));var s=[];return r.map((function(t){var e={};t.map((function(t,n){e[a[n]]=t})),s.push(e)})),s},B=n(9),N=n.n(B),F=n(11),Y=n(8),J=n(21).promises;function z(){return(z=u()(l.a.mark((function t(e,n,r,a,s,o){var i,u,c,f,p,h,d,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a,"object"===x()(a)&&(i="".concat(a.caslib,".").concat(a.name)),u=Object(F.a)(r,i),null==o){t.next=7;break}t.t0=o,t.next=10;break;case 7:return t.next=9,J.readFile(r,u.fileOptions);case 9:t.t0=t.sent;case 10:return c=t.t0,null!==u.transform&&(c=u.transform(c,u)),t.next=14,u.handler(e,n,c,u,s);case 14:if(f=t.sent,!0!==s){t.next=20;break}return p=i.split("."),h=N()(p,2),d=h[0],b=h[1],t.next=19,Object(Y.a)(e,n,d,b);case 19:f=f+"\n"+"   ".concat(a," was saved");case 20:return t.abrupt("return",f);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Q=function(t,e,n,r,a,s){return z.apply(this,arguments)};function G(){return(G=u()(l.a.mark((function t(e,n,a,s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"\n\t  print _args_;\n    rc = checkAndLoadTable(_args_.caslib, _args_.name);\n\t\tif (rc ne true) then do;\n\t\t\ttext = 'Unable to access ' ||_args_.caslib||'.'||_args_.name;   \n\t\t\trx = {severity=2,reason=6, status='error',statusCode=2, formatted=text};\n\t\t\texit(rx);  \n\t\tend; \n\t  print 'return code = ' || rc;\n\t  send_response({casResults={status='ok'}});\n  ",t.next=3,Object(r.a)(e,n,"\n\t  print _args_;\n    rc = checkAndLoadTable(_args_.caslib, _args_.name);\n\t\tif (rc ne true) then do;\n\t\t\ttext = 'Unable to access ' ||_args_.caslib||'.'||_args_.name;   \n\t\t\trx = {severity=2,reason=6, status='error',statusCode=2, formatted=text};\n\t\t\texit(rx);  \n\t\tend; \n\t  print 'return code = ' || rc;\n\t  send_response({casResults={status='ok'}});\n  ",a,!0);case 3:return t.sent,t.abrupt("return",{msg:"".concat(a.caslib,".").concat(a.name," loaded}"),statusCode:0});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var H=function(t,e,n,r){return G.apply(this,arguments)};function V(){return(V=u()(l.a.mark((function t(e,n,r,a){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==r||null!=a){t.next=6;break}return t.next=3,W(e,n,r);case 3:s=t.sent,t.next=9;break;case 6:return t.next=8,K(e,n,a);case 8:s=t.sent;case 9:return t.abrupt("return",s);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t,e,n){return X.apply(this,arguments)}function X(){return(X=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u,c,f,p,h,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a={session:n,log:null,listing:null,ods:null,job:r,tables:{},files:{}}).log=r.links("log"),a.listing=r.links("listing"),null===(s=r.links("results"))){t.next=10;break}return t.next=7,e.apiCall(s);case 7:if(o=t.sent,(i=o.itemsList().size)>0)for(u=0;u<i;u++)c=o.itemsList(u),"ods"===(f=o.items(c,"data","type").toLowerCase())?a.ods=o.itemsCmd(c,"self"):"table"===f?(p={self:o.itemsCmd(c,"self"),current:null},a.tables[c.toUpperCase()]=p):"file"===f?(h={self:c,current:null,data:null},a.files[c]=h):(d={self:c,current:null,data:null},a[f]=d);case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t,e,n){return $.apply(this,arguments)}function $(){return($=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u,c,f,p,h,d,b,m,y;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={session:n,log:null,listing:null,ods:null,job:null,tables:{},files:{}},s="object"===x()(r)?[r]:r,o=0;case 3:if(!(o<s.length)){t.next=29;break}return i=s[o],u=i.libref.toUpperCase(),c=i.name.toUpperCase(),f={qs:{filter:"eq(name,'".concat(u,"')")}},t.next=10,e.apiCall(n.links("librefs"),f);case 10:if(0!==(p=t.sent).itemsList().size){t.next=13;break}throw"ERROR: Libref ".concat(u," not found");case 13:return h=p.itemsCmd(u,"self"),t.next=16,e.apiCall(h);case 16:return d=t.sent,f={qs:{filter:"eq(name,'".concat(c,"')")}},t.next=20,e.apiCall(d.links("tables"),f);case 20:if(0!==(b=t.sent).itemsList().size){t.next=23;break}throw"ERROR: Table ".concat(c," not found");case 23:m="".concat(u,".").concat(c).toLowerCase(),y={self:b.itemsCmd(c,"self"),current:null},a.tables[m.toUpperCase()]=y;case 26:o++,t.next=3;break;case 29:return t.abrupt("return",a);case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=function(t,e,n,r){return V.apply(this,arguments)};function tt(){return(tt=u()(l.a.mark((function t(e,n,r,a,s,o){var i,u,c,f,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={data:{code:r}},t.next=3,e.apiCall(n.links("execute"),i);case 3:return u=t.sent,c={qs:{wait:null!=a?a:5},headers:{"If-None-Match":u.headers("etag")}},t.next=7,e.jobState(u,c,"longpoll",0,s,o);case 7:return f=t.sent,t.next=10,Z(e,n,f.job);case 10:return(p=t.sent).SASJobStatus=f.data,p.jobStateStatus=f,t.abrupt("return",p);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var et=function(t,e,n,r,a,s){return tt.apply(this,arguments)};function nt(){return(nt=u()(l.a.mark((function t(e,n,r,a,s,o,i){var u,c,f,p,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"==typeof o&&(o=null),u=["options NOSYNTAXCHECK OBS=MAX;%let syscc=0;"],null!=a)for(c in a)f="%let ".concat(c,"=").concat(a[c],";"),u.push(f);return p=(p=r.replace(/\t/g," ")).split(/\r?\n/),u=u.concat(p).concat(";"),t.next=8,et(e,n,u,s,o,i);case 8:return h=t.sent,t.abrupt("return",h);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var rt=function(t,e,n,r,a,s,o){return nt.apply(this,arguments)};function at(){return(at=u()(l.a.mark((function t(e,n,r,a,s){var o,i,u,c,f,p,h,d,b,m,y;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addServices("compute");case 2:if(o=t.sent,i=o.compute,null==s||"object"!==x()(s)){t.next=6;break}return t.abrupt("return",s);case 6:if(null==r){t.next=10;break}return t.next=9,e.logon(r);case 9:t.sent;case 10:if(u=null,null==s){t.next=24;break}return c={start:0,limit:100,qs:{filter:"eq(id,'".concat(s,"')")}},t.next=15,e.apiCall(i.links("sessions"),c);case 15:if(f=t.sent,!((p=f.itemsList().toJS().indexOf(s))<0)){t.next=19;break}throw"ERROR: The sessionID ".concat(s," was not found.");case 19:return h=f.itemsCmd(f.itemsList(p),"self"),t.next=22,e.apiCall(h);case 22:return u=t.sent,t.abrupt("return",u);case 24:if(null==e.store.config.options.computeServerId){t.next=30;break}return console.log("NOTE: Detected Workbench"),t.next=28,e.apiCall(i.links("createSession"));case 28:return u=t.sent,t.abrupt("return",u);case 30:return null==n&&(n="SAS Job Execution compute context"),d={qs:{filter:"contains(name,'".concat(n,"')")}},b=null,t.prev=33,t.next=36,e.apiCall(i.links("contexts"),d);case 36:if(0!==(b=t.sent).itemsList().size){t.next=39;break}throw"Context ".concat(n," not found");case 39:t.next=45;break;case 41:throw t.prev=41,t.t0=t.catch(33),console.log("Error: Not able to get context"),t.t0;case 45:if(m=b.itemsList(0),null!=s){t.next=52;break}return d=null==a?null:a,y=b.itemsCmd(m,"createSession"),t.next=51,e.apiCall(y,a);case 51:u=t.sent;case 52:return t.abrupt("return",u);case 53:case"end":return t.stop()}}),t,null,[[33,41]])})))).apply(this,arguments)}var st=function(t,e,n,r,a){return at.apply(this,arguments)};function ot(){return(ot=u()(l.a.mark((function t(e,n,r){var a,s,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("log"!==r&&"listing"!==r){t.next=20;break}if(a=[],null===n[r]){t.next=16;break}return t.next=5,e.apiCall(n[r]);case 5:s=t.sent,a=a.concat(s.items().toJS());case 7:if(null===(o=s.scrollCmds("next"))){t.next=14;break}return t.next=10,e.apiCall(o);case 10:s=t.sent,a=a.concat(s.items().toJS()),t.next=7;break;case 14:t.next=17;break;case 16:a[0]="Note: No ".concat(r);case 17:return t.abrupt("return",a);case 20:if("ods"!==r){t.next=31;break}if(null===n.ods){t.next=28;break}return t.next=24,e.apiCall(n.ods);case 24:return i=t.sent,t.abrupt("return",i.items());case 28:return t.abrupt("return","<h2> No ODS output </h2>");case 29:t.next=40;break;case 31:if("tables"!==r){t.next=35;break}return t.abrupt("return",Object.keys(n.tables));case 35:if("files"!==r){t.next=39;break}return t.abrupt("return",Object.keys(n.files));case 39:throw"Error: Invalid type ".concat(r);case 40:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var it=function(t,e,n){return ot.apply(this,arguments)};function ut(){return(ut=u()(l.a.mark((function t(e,n,r,a){var s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==a){t.next=6;break}return t.next=3,rt(e,n,a);case 3:if("completed"===(s=t.sent).SASJobStatus){t.next=6;break}throw"Error: Preamble failed with completion code of ".concat(s.SASJobStatus);case 6:return t.next=8,Z(e,n,null,r);case 8:return o=t.sent,t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ct=function(t,e,n,r){return ut.apply(this,arguments)};function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(){return(pt=u()(l.a.mark((function t(e,n,r,a,s,o){var i,u,c,f,p,h,d,b,m,y,g,v,w,x,_,k,S,E,C,T,R,A;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null,u=(u="string"==typeof r?r:"".concat(r.libref,".").concat(r.name)).toUpperCase(),(c=null!=s?ft({},s):{qs:{}}).qs.includeIndex=!0,f=null==o?"rows":o,p=null!=s&&null==a,null==(h=n.tables[u])){t.next=45;break}if(!0===p&&(h.current=null),null!==h.current&&null!=a&&"first"!==a){t.next=33;break}return t.next=13,e.apiCall(h.self);case 13:return d=t.sent,b=d.items().toJS().columnCount,m={qs:{start:0,limit:b}},t.next=18,e.apiCall(d.links("columns"),m);case 18:for(w in y=t.sent,g=[],v=y.items().toJS(),"rows"===f&&g.push({name:"_index_",Column:"_Index_",Label:"Index",length:8,type:"FLOAT",format:"BEST",informat:"BEST"}),v)x=v[w],console.log(x.name,x.data.type,x.data.format,x.data.informat),_={name:x.name.toLowerCase(),Column:x.name.toLowerCase(),Label:x.data.label,length:x.data.length,type:x.data.type,format:null!=x.data.format?x.data.format.name:null,informat:null!=x.data.informat?x.data.informat.name:null,custom:!1},k=!0===c.qs.includeIndex?1:0,g[x.data.index+k]=_;return t.next=25,e.apiCall(d.links(f),c);case 25:S=t.sent,E="rowSet"===f?S.items("rows").toJS():ht(S),h.current=S,h.schema=g,h.columns=y,i={columns:y,schema:g,rows:E,scrollOptions:S.scrollCmds().keySeq().toJS()},t.next=45;break;case 33:if(C=h.current,T=a,"next"===a&&null===C.scrollCmds("next")&&(T=null!==C.links("last")?"last":null),"prev"===a&&null===C.scrollCmds("prev")&&(T=null!==C.links("first")?"first":null),i={schema:h.schema,columns:h.columns,currentColumns:h.currentColumns,rows:[],scrollOptions:C.scrollCmds().keySeq().toJS()},null===T||null===C.scrollCmds(T)){t.next=45;break}return t.next=41,e.apiCall(C.scrollCmds(T),c);case 41:R=t.sent,h.current=R,A="rows"!==f?R.items("rows").toJS():ht(R),i={schema:h.schema,columns:h.schema,rows:A,scrollOptions:R.scrollCmds().keySeq().toJS()};case 45:return t.abrupt("return",i);case 46:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(t){return t.items().toJS().map((function(t){return t.cells}))}var dt=function(t,e,n,r,a,s){return pt.apply(this,arguments)};function bt(){return(bt=u()(l.a.mark((function t(e,n,r,a){var s,o,i,u,c,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(s=n.files[r])){t.next=3;break}throw"Invalid fileref ".concat(r);case 3:if(null!==s.current){t.next=12;break}return o={qs:{filter:"eq(name,'".concat(r,"')")}},t.next=7,e.apiCall(n.session.links("files"),o);case 7:return i=t.sent,t.next=10,e.apiCall(i.itemsCmd(r,"self"));case 10:i=t.sent,s.current=i;case 12:if(!0!==a){t.next=17;break}return u="".concat(n.session.host).concat(s.current.links("content","link","uri")),t.abrupt("return",u);case 17:if(null!==s.data){t.next=26;break}return t.next=20,e.apiCall(s.current.links("content"));case 20:return c=t.sent,f=c.items(),s.data=f,t.abrupt("return",f);case 26:return t.abrupt("return",s.data);case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var mt=function(t,e,n,r){return bt.apply(this,arguments)};function yt(){return(yt=u()(l.a.mark((function t(e,n,r,a){var s,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="\n     proc append base=".concat(a.libref,".{output.name}  \n     data= ").concat(r.libref,".").concat(r.name,"; run;\n     "),t.next=3,rt(e,n,s);case 3:return o=t.sent,i="completed"===o.SASJobStatus?0:1,t.abrupt("return",{msg:"Append Completed. Status is: ".concat(o.SASJobStatus),statusCode:i});case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gt=function(t,e,n,r){return yt.apply(this,arguments)};function vt(){return(vt=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u,c,f,p,h,d,b,m,y,g,v,w,x,_;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(f in a=r.data,s=r.table,o=r.where,i="proc sql; update ".concat(s.libref,".").concat(s.name),u="SET ",c=" ",a)u=u+c+f+"="+wt(a[f]),c=", ";if(i=i+" "+u,p=" WHERE ",h=" ","string"==typeof o)p+=o;else for(d in o)b=o[d],m=wt(b),p=p+h+d+"= ".concat(m," "),h=" AND ";return y=(i=i+" "+p+";run;").split(/\r?\n/),g={data:{code:y}},t.next=14,e.apiCall(n.links("execute"),g);case 14:return v=t.sent,w={qs:{newState:"Completed",timeout:1}},t.next=18,e.jobState(v,w);case 18:return x=t.sent,_="completed"===x.data?0:1,t.abrupt("return",{statusCode:_,msg:x.data});case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wt(t){return null==t?".":"string"==typeof t?JSON.stringify(t):t.toString()}var xt=function(t,e,n){return vt.apply(this,arguments)};function _t(){return(_t=u()(l.a.mark((function t(e,n,r,a,s){var o,i,u,c,f,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in o="data ".concat(r.libref,".").concat(r.name,"; INFILE datalines delimiter=',' ;\n"),i="",u="INPUT ",s)f=s[c],u=u+f.Column+" ","CHAR"===f.Type&&(p=" ".concat(f.Column," $ ").concat(f.length," \n"),i=i+" "+p);return i.length>0&&(i="LENGTH "+i+";\n"),o=o+";\n"+i+(u+=";\n")+"datalines;\n"+a+"\n; run; proc print;run;\n",t.next=9,rt(e,n,o);case 9:return t.abrupt("return",{msg:"done",statusCode:0});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var kt=function(t,e,n,r,a){return _t.apply(this,arguments)};function St(){return(St=u()(l.a.mark((function t(e,n){var r,a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getService("reports"),a=null,null!==n&&(a={qs:{filter:"eq(name,'".concat(n,"')")}}),t.next=5,e.apiCall(r.links("reports"),a);case 5:return s=t.sent,t.abrupt("return",0===s.itemsList().size?null:s);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Et=function(t,e){return St.apply(this,arguments)};function Ct(){return(Ct=u()(l.a.mark((function t(e,n){var r,a,s,o,i,u,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.rafObject("reportImages"),t.next=3,Et(e,n);case 3:if(null!==(a=t.sent)){t.next=6;break}return t.abrupt("return","".concat(n," was not found"));case 6:return s=a.itemsCmd(a.itemsList(0),"self","link","uri"),o={data:{reportUri:s,sectionIndex:0,layoutType:"entireSection",size:"400x400"}},t.next=11,e.apiCall(r.links("createJob"),o);case 11:return i=t.sent,t.next=14,e.jobState(i,{qs:{wait:1.5}},10,2);case 14:if("completed"===(u=t.sent).data){t.next=17;break}return t.abrupt("return","Job failed ".concat(u.data));case 17:return t.next=19,e.apiCall(u.job.itemsCmd(u.job.itemsList(0),"image"));case 19:return c=t.sent,t.abrupt("return",c.items());case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Tt=function(t,e){return Ct.apply(this,arguments)};function Rt(){return(Rt=u()(l.a.mark((function t(e,n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Et(e,n);case 2:if(null!==(r=t.sent)){t.next=6;break}throw null==n?"No reports were found":"".concat(n," was not found");case 6:return a=[],r.items().map((function(t,e){var n={name:e,uri:r.itemsCmd(e,"self","link","uri")};a.push(n)})),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var At=function(t,e){return Rt.apply(this,arguments)};function Ot(){return(Ot=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u,c,f,p,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.tables[r],t.next=3,e.apiCall(a);case 3:return s=t.sent,t.next=6,e.apiCall(s.links("rowSet"));case 6:o=t.sent,i=o.items("columns"),u=o.items("rows"),c=[],f=u.size,p=l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=u.get(h),n={},i.map((function(t,r){var a=t.toLowerCase();n[a]=e.get(r)})),c.push(n);case 4:case"end":return t.stop()}}),t)})),h=0;case 13:if(!(h<f)){t.next=18;break}return t.delegateYield(p(),"t0",15);case 15:h++,t.next=13;break;case 18:return t.abrupt("return",c);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var jt=function(t,e,n){return Ot.apply(this,arguments)};function Pt(){return(Pt=u()(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n){t.next=3;break}return t.next=3,e.logon(n);case 3:return t.next=5,e.addServices("jobExecution","compute","jobDefinitions");case 5:return r=t.sent,t.abrupt("return",r.jobExecution);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Lt=function(t,e){return Pt.apply(this,arguments)};function Ut(){return(Ut=u()(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var It=function(t,e){return Ut.apply(this,arguments)};function Dt(){return(Dt=u()(l.a.mark((function t(e,n,r){var a,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.apiCall(n.links("create"),r);case 2:return a=t.sent,t.next=5,e.jobState(a,null,5,2);case 5:if("running"!==(s=t.sent).data){t.next=10;break}throw"ERROR: Job did not complete in allotted time";case 10:if("failed"!==s.data){t.next=14;break}throw JSON.stringify(s);case 14:return t.next=16,It(e,s.job);case 16:return o=t.sent,t.abrupt("return",o);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var qt=function(t,e,n){return Dt.apply(this,arguments)};function Mt(){return(Mt=u()(l.a.mark((function t(e,n,r,a,s){var o,i,u,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o={},i={},null===a){t.next=6;break}return t.next=5,Bt(e,a);case 5:o.jobDefinitionUri=t.sent;case 6:return-0!=r&&(i.code=r),i.type="Compute",o.arguments=s,o.jobDefinition=i,u={data:o},t.next=13,qt(e,n,u);case 13:return c=t.sent,t.abrupt("return",c);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bt(t,e){return Nt.apply(this,arguments)}function Nt(){return(Nt=u()(l.a.mark((function t(e,n){var r,a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.getService("jobDefinitions"),r=null,a={qs:{filter:"eq(name,'".concat(n,"')")}},t.next=5,qt(e,a);case 5:if(0!==(s=t.sent).itemsList().size){t.next=10;break}throw"Error: ".concat(n," not found in the system");case 10:r=s.itemsCmd(n,"self","link","uri");case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ft=function(t,e,n,r,a){return Mt.apply(this,arguments)},Yt=n(7);function Jt(){return(Jt=u()(l.a.mark((function t(e,n,r){var a,s,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.service,s=0;case 2:if(!(s<r.length)){t.next=12;break}if(o=r[s],null!=n.steps[o]){t.next=9;break}return t.next=7,Gt(e,a,o);case 7:i=t.sent,n.steps[o]=i;case 9:s++,t.next=2;break;case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var zt=function(t,e,n){return Jt.apply(this,arguments)};function Qt(){return(Qt=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={qs:{filter:"eq(name,'".concat(r.trim(),"')")}},t.next=3,e.apiCall(n.links("modules"),a);case 3:if(0!==(s=t.sent).itemsList().size){t.next=6;break}return t.abrupt("return",null);case 6:return o=s.itemsCmd(r,"steps"),t.next=9,e.apiCall(o);case 9:return i=t.sent,u={name:r,stepsRafLink:i,stepIds:s.items(r,"data","stepIds").toJS(),microanalyticScore:n},t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Gt=function(t,e,n){return Qt.apply(this,arguments)};function Ht(){return(Ht=u()(l.a.mark((function t(e,n,r){var a,s,o,i,u,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==r){t.next=3;break}return t.next=3,e.logon(r);case 3:return t.next=5,e.addServices("microanalyticScore");case 5:a=t.sent,s=a.microanalyticScore,o={service:s,steps:{}},i=0;case 9:if(!(i<n.length)){t.next=18;break}return u=n[i],t.next=13,Gt(e,s,u);case 13:c=t.sent,o.steps[u]=c;case 15:i++,t.next=9;break;case 18:return t.abrupt("return",o);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Vt=function(t,e,n){return Ht.apply(this,arguments)};var Wt=function(t,e,n){var r=t.steps[e];if(null===r)return[];var a=null;if(null==n){var s=r.stepIds.findIndex((function(t){return"execute"===t||"score"===t}));if(-1===s)return[];a=r.stepIds[s]}else{if(-1===r.stepIds.findIndex((function(t){return t===n})))return[];a=n}var o=r.stepsRafLink.items(a,"data","inputs");return null===o?[]:o.toJS()};function Xt(){return(Xt=u()(l.a.mark((function t(e,n,r,a,s,o){var i,u,c,f,p,h,d,b,m,y,g,v,w;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.steps[r],u=!1,c=[],!1===Array.isArray(a))for(f in a)p={name:f,value:a[f]},c.push(p);else u=!0;if(h={data:{inputs:!0===u?a:c}},d=null,null!=s){t.next=15;break}if(-1!==(b=i.stepIds.findIndex((function(t){return"execute"===t||"score"===t})))){t.next=12;break}return t.abrupt("return",[]);case 12:d=i.stepIds[b];case 13:t.next=21;break;case 15:if(-1!==i.stepIds.findIndex((function(t){return t===s}))){t.next=20;break}return t.abrupt("return",[]);case 20:d=s;case 21:if(null==o&&(o="execute"),null!==(m=i.stepsRafLink.itemsCmd(d,o))){t.next=26;break}return y=[{name:"Error",type:"string",value:"name: ".concat(r," step: ").concat(s," operation: ").concat(o," is an invalid combination")}],t.abrupt("return",y);case 26:return t.next=28,e.apiCall(m,h);case 28:return g=t.sent,v=g.items("outputs").toJS(),!0===u?w=v:(w={},v.map((function(t){w[t.name]=t.value}))),t.abrupt("return",w);case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Kt=function(t,e,n,r,a,s){return Xt.apply(this,arguments)};function $t(){return($t=u()(l.a.mark((function t(e,n,r){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vt(e,[n]);case 2:return a=t.sent,t.next=5,Kt(e,a,n,r,"score","execute");case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Zt=function(t,e,n){return $t.apply(this,arguments)},te=n(26);function ee(){return(ee=u()(l.a.mark((function t(e,n,r,a,s,o){var i,u,c,f,p,h,d,b,m,y,g,v,w,x;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.addServices("casManagement");case 2:return i=t.sent,u=i.casManagement,t.next=6,s.apiCall(u.links("servers"));case 6:if(0!==(c=t.sent).itemsList().size){t.next=9;break}throw{Error:"No cas servers were found"};case 9:return f=c.itemsList(0),p={qs:{filter:"eq(name,".concat(e,")")}},t.next=13,s.apiCall(c.itemsCmd(f,"caslibs"),p);case 13:return h=t.sent,t.next=16,s.apiCall(h.itemsCmd(e,"tables"));case 16:return d=t.sent,b={qs:{filter:"eq(name, ".concat(n.trim().toUpperCase(),")")}},t.next=20,s.apiCall(h.itemsCmd(e,"tables"),b);case 20:if(1!==(m=t.sent).itemsList().size){t.next=25;break}return y=m.itemsList(0),g=m.items(y,"data","tableReference","tableUri"),t.abrupt("return",g);case 25:return(v=new te).append("tableName",n),v.append("format",a),v.append("scope",null==o?"global":o),v.append("replace",!0),v.append("containsHeaderRow",!0),v.append("file",r),w={data:v,headers:{"content-type":'multipart/form-data; boundary="----------12345678901234567"'}},t.next=35,s.apiCall(d.links("upload"),w);case 35:return x=t.sent,t.abrupt("return",x);case 37:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ne=function(t,e,n,r,a,s){return ee.apply(this,arguments)};var re=function(){return{caslRun:r.a,caslRunBase:a.a,casSetup:k,casActionRun:E,casFetchData:T,casUpdateData:L,computeRun:rt,computeSetup:st,computeSummary:Z,computeFetchData:dt,computeFileContent:mt,computeResults:it,findReport:Et,getReportImage:Tt,getReportUri:At,getSASTableRows:jt,jesSetup:Lt,jesRun:Ft,jesSummary:It,jsonToDict:Yt.a,casTableToJson:M,caslScore:b,caslDescribe:v,masSetup:Vt,masAddModel:zt,masDescribe:Wt,masRun:Kt,casUpload:Q,uploadData:ne}}()}])}));