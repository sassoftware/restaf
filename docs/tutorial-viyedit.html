<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Library Overviews viyedit</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="style.css">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Overviews</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-authentication.html">
                                authentication
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Browsing-a-Cas-Table.html">
                                Browsing-a-Cas-Table
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-casActionRun.html">
                                casActionRun
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-casActionRunExample.html">
                                casActionRunExample
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-casFetchData.html">
                                casFetchData
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-caslRun.html">
                                caslRun
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-caslScore.html">
                                caslScore
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-casSetup.html">
                                casSetup
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Compute-Service-made-easy.html">
                                Compute-Service-made-easy
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-computeFetchData.html">
                                computeFetchData
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-computeResults.html">
                                computeResults
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-computeRun.html">
                                computeRun
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-computeRunExample.html">
                                computeRunExample
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-computeSetup.html">
                                computeSetup
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-computeSummary.html">
                                computeSummary
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Configuring-SAS-Viya-AWS-Quick-Start-for-serverless-functions.html">
                                Configuring-SAS-Viya-AWS-Quick-Start-for-serverless-functions
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Executing-a-cas-action.html">
                                Executing-a-cas-action
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-findReport.html">
                                findReport
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-getReportImage.html">
                                getReportImage
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-getReportUri.html">
                                getReportUri
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Home.html">
                                Home
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-import-export.html">
                                import-export
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-lazyProgrammer.html">
                                lazyProgrammer
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Managing-clientids.html">
                                Managing-clientids
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-masDescribe.html">
                                masDescribe
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-masRun.html">
                                masRun
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-masSetup.html">
                                masSetup
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-quickStart.html">
                                quickStart
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-reactTips.html">
                                reactTips
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-restaf---Building-Applications-with-SAS-REST-API-made-simple.html">
                                restaf---Building-Applications-with-SAS-REST-API-made-simple
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-restaf-Background.html">
                                restaf-Background
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-restaf-Introduction.html">
                                restaf-Introduction
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-restafeditExample.html">
                                restafeditExample
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-restaflib-introduction.html">
                                restaflib-introduction
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Scoring-in-the-Cas-Server.html">
                                Scoring-in-the-Cas-Server
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Scoring-with-MAS.html">
                                Scoring-with-MAS
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-Scripting-on-the-Cas-Server.html">
                                Scripting-on-the-Cas-Server
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-usefulTips.html">
                                usefulTips
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-vaddc.html">
                                vaddc
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-viyedit.html">
                                viyedit
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/sassoftware/restaf/blob/main/README.md"
                        >
                            restaf
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://github.com/sassoftware/restaf/blob/main/packages/restaflib/README.md"
                        >
                            restaflib
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://github.com/sassoftware/restaf/blob/restafedit/README.md"
                        >
                            restafedit
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar tutorials"
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <div class="category"><h3>Tutorials</h3><ul><li><a href="tutorial-authentication.html">authentication</a></li><li><a href="tutorial-Browsing-a-Cas-Table.html">Browsing-a-Cas-Table</a></li><li><a href="tutorial-casActionRun.html">casActionRun</a></li><li><a href="tutorial-casActionRunExample.html">casActionRunExample</a></li><li><a href="tutorial-casFetchData.html">casFetchData</a></li><li><a href="tutorial-caslRun.html">caslRun</a></li><li><a href="tutorial-caslScore.html">caslScore</a></li><li><a href="tutorial-casSetup.html">casSetup</a></li><li><a href="tutorial-Compute-Service-made-easy.html">Compute-Service-made-easy</a></li><li><a href="tutorial-computeFetchData.html">computeFetchData</a></li><li><a href="tutorial-computeResults.html">computeResults</a></li><li><a href="tutorial-computeRun.html">computeRun</a></li><li><a href="tutorial-computeRunExample.html">computeRunExample</a></li><li><a href="tutorial-computeSetup.html">computeSetup</a></li><li><a href="tutorial-computeSummary.html">computeSummary</a></li><li><a href="tutorial-Configuring-SAS-Viya-AWS-Quick-Start-for-serverless-functions.html">Configuring-SAS-Viya-AWS-Quick-Start-for-serverless-functions</a></li><li><a href="tutorial-Executing-a-cas-action.html">Executing-a-cas-action</a></li><li><a href="tutorial-findReport.html">findReport</a></li><li><a href="tutorial-getReportImage.html">getReportImage</a></li><li><a href="tutorial-getReportUri.html">getReportUri</a></li><li><a href="tutorial-Home.html">Home</a></li><li><a href="tutorial-import-export.html">import-export</a></li><li><a href="tutorial-lazyProgrammer.html">lazyProgrammer</a></li><li><a href="tutorial-Managing-clientids.html">Managing-clientids</a></li><li><a href="tutorial-masDescribe.html">masDescribe</a></li><li><a href="tutorial-masRun.html">masRun</a></li><li><a href="tutorial-masSetup.html">masSetup</a></li><li><a href="tutorial-quickStart.html">quickStart</a></li><li><a href="tutorial-reactTips.html">reactTips</a></li><li><a href="tutorial-restaf---Building-Applications-with-SAS-REST-API-made-simple.html">restaf---Building-Applications-with-SAS-REST-API-made-simple</a></li><li><a href="tutorial-restaf-Background.html">restaf-Background</a></li><li><a href="tutorial-restaf-Introduction.html">restaf-Introduction</a></li><li><a href="tutorial-restafeditExample.html">restafeditExample</a></li><li><a href="tutorial-restaflib-introduction.html">restaflib-introduction</a></li><li><a href="tutorial-Scoring-in-the-Cas-Server.html">Scoring-in-the-Cas-Server</a></li><li><a href="tutorial-Scoring-with-MAS.html">Scoring-with-MAS</a></li><li><a href="tutorial-Scripting-on-the-Cas-Server.html">Scripting-on-the-Cas-Server</a></li><li><a href="tutorial-usefulTips.html">usefulTips</a></li><li><a href="tutorial-vaddc.html">vaddc</a></li><li><a href="tutorial-viyedit.html">viyedit</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Tutorial</p>
                    <h1>viyedit</h1>
                </header>
                <section>

<article>
    <h1>Jump Start Data Editing in SAS Viya</h1>
<p>This small react component library serves multiple purposes:</p>
<ul>
<li>
<p>Help build Data Entry Applications quickly with minimal effort</p>
</li>
<li>
<p>Uses <a href="https://github.com/sassoftware/restaf/blob/restafedit/README.md">@sassoftware/restafedit</a> to access CAS tables and support custom calculations.</p>
<p>SAS Tables will be supported in the next version</p>
</li>
</ul>
<blockquote> React version
<p>Designed to work with any  React version &gt;= 16.</p>
</blockquote>
<hr>
<h2>Install</h2>
<hr>
<pre class="prettyprint source lang-sh"><code>
npm install @sassoftware/viyaedit

</code></pre>
<h3>PeerDependencies</h3>
<p>If your package manager does not install peer dependencies then install these manually.</p>
<pre class="prettyprint source lang-js"><code>{
    &quot;@sassoftware/restaf&quot;: &quot;>= 4.4.8&quot;,
    &quot;@sassoftware/restaflib&quot;: &quot;>= 4.4.8&quot;,
    &quot;@sassoftware/restafedit&quot;: &quot;>= 0.11.0&quot;
}

</code></pre>
<hr>
<h2>Usage</h2>
<hr>
<p>DataEditor is the entry component</p>
<h3>Sample React Component</h3>
<pre class="prettyprint source lang-jsx"><code>
&lt;DataEditor viyaConnection={viyaConnection} appControl={appControl} editor={editorfunction}/>

</code></pre>
<p>Here is a link to a working <a href="https://github.com/sassoftware/restaf-uidemos/blob/editorappreact/src/components/viewers/Sample.js">sample</a> that uses this. For convenience the code is included here.</p>
<pre class="prettyprint source lang-jsx"><code>
import React from 'react';
import helpers from '../helpers';
import {DataEditor} from '@sassoftware/viyaedit';

import Grid from &quot;@material-ui/core/Grid&quot;;

function Sample (props) {

  // See below - moved it to a function for code readability
  let appControl = getAppControl();
  
  let viyaConnection = {
    host: 'https://myViyaServer.com',
    authType: 'code'
  }
  
  // Used as editor function
  const _editor = () => {
    return helpers['SampleForm']; 
  };

 // main call
  return (
    &lt;div key={Date()}>
      &lt;Grid container spacing={3} direction=&quot;row&quot;>
          &lt;Grid item>
            &lt;DataEditor key={Date()}
                  appControl={appControl} 
                  viyaConnection={viyaConnection}   
                  editor={_editor}  
                  />
          &lt;/Grid>
        &lt;/Grid>
    &lt;/div>
    
  );


//
// handlers for init, main, term and selected columns
//
async function init (data,row,appEnv,type) {
  let status = {code: 0, msg: `${type} processing completed`};
  data.total = data.x1 + data.x2 + data.x3 ;
  let newData = data; /* you can modify the incoming data and return it */
  return [newData, status];
};

async function term (data, type) {
  let status = {code: 0, msg: `${type} processing completed`};
  return [data, status];
};

async function x1 (data, value, name) {
let msg = {code: 0, msg: `${name} handler executed.`};
if (data.x1 > 10) {
    data.x1 = 10;
    msg = {code: 0, msg: &quot;Exceeded Max. Value reset to max&quot;};
}

return [data, msg];
};

// Application control for restafedit to use.

function getAppControl () {
  return {
      description: 'Simple Example',
      dataControl: {
        source: 'cas',
        table : {caslib: 'casuser', name: 'testdata'},
        access: {},
        byvars: ['id'],
        where : {},

        cachePolicy: true,

        initialFetch: {
          count : 1,
          from  : 1,
          format: false
        },

        customColumns: {
          total: {
            Column         : &quot;Total&quot;,
            Label          : &quot;Grand Total&quot;,
            FormattedLength: 12,
            Type           : &quot;double&quot;
            }
        },
        customRows: []
      },
      editControl: {
        handlers: {init: init, main: init, term: term, x1: x1}, 
        save    : true,  
        autoSave: true, 
    
      },
      appData: {}    /* put here whatever you want to pass to your editor component */
      
   };
  }

}
export default Sample;

</code></pre>
<h2>Props to DataEditor</h2>
<h3><code>viyaConnection</code></h3>
<p>Usually your app is running with authorization_code flow. So use this:</p>
<pre class="prettyprint source lang-js"><code>{
    host: &lt;your Viya server url>,
    authType: 'code'
}
</code></pre>
<p>Sometime, even with authorization_code you might want to use tokens. Then use this:</p>
<pre class="prettyprint source lang-js"><code>{
    host: &lt;your Viya server url>,
    authType: 'code',
    token: &lt;your token>
    tokenType: 'bearer
}
</code></pre>
<h3><code>AppControl</code></h3>
<p>This is the same appControl used with @sassoftware/restafedit (see <a href="https://github.com/sassoftware/restaf/blob/restafedit/README.md">here</a>)</p>
<h3><code>editor</code></h3>
<p>This is a function that returns your editor component.
For example if your editor component(written with any react component library) MyEditor. See below for its props.</p>
<p>See these links for examples.</p>
<ul>
<li>
<p><a href="https://github.com/sassoftware/restaf-uidemos/blob/editorappreact/src/components/helpers/SampleForm.js">Sample Form Editor</a></p>
</li>
<li>
<p><a href="https://github.com/sassoftware/restaf-uidemos/blob/editorappreact/src/components/helpers/DataFormMulti.js">Form Editor</a></p>
</li>
<li>
<p><a href="https://github.com/sassoftware/restaf-uidemos/blob/editorappreact/src/components/helpers/TableEditorMui.js">Table Editor</a></p>
</li>
</ul>
<pre class="prettyprint source lang-js"><code>
const V = editorFunc();

</code></pre>
<p>The viyaedit component will use this prop as follows:</p>
<pre class="prettyprint source lang-js"><code>
const V = props.editor();

return (
      &lt;Fragment>
            &lt;V 
             onEdit={_onEdit}
             onScroll={_onScroll}
             onSave={_onSave}
             status={status}
             appEnv={appEnv}
             />
        &lt;/Fragment>

)
</code></pre>
<hr>
<h2>Details on the editor prop</h2>
<hr>
<p>The editor component needs to handle the following props</p>
<h3>onEdit</h3>
<p>This callback will run your custom calculations and save the record to the server. The autosave is controlled by the option in appControl.
Typically you will call this after the user enters a value and presses enter or changes cursor focus.</p>
<p>To call it use this sample code:</p>
<pre class="prettyprint source lang-js"><code>props.onEdit(
    name, /* name of the column */
    value, /* new value to be saved */
    rowIndex, /*index of the row. Between 0 and the number of records retrieve on last fetch */
    data, /* the data for the row */
    appEnv /* control object that was passed into your component */ 
</code></pre>
<h4>onScroll</h4>
<p>To scroll to previous or next record call this. This callback will retrieve new records from the server.</p>
<pre class="prettyprint source lang-js"><code>
props.onScroll(direction)

</code></pre>
<p>Direction can be 'first', 'prev', 'next'</p>
<h4>onSave</h4>
<p>Use this if you are not doing a autoSave on each edit</p>
<hr>
<p>props.onSave(data, appEnv);</p>
<hr>
<p>data is the current row</p>
<h4>status</h4>
<p>The status is returned by DataEditor. it is of the form</p>
<p>{
status: 0|1|2,
msg: <some string>
}</p>
<p>Could be null to indicate that there is no status to report</p>
<h5>appEnv</h5>
<p>This is the control object for the edit session. For details on this see @sassoftware/restafedit.</p>
<p>This object is useful in more advanced use cases. See the documentation for @sassoftware/restafedit.</p>
</article>

</section>

            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>